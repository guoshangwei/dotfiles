#!/usr/bin/env ruby

orig_cat = (`which -a cat`.split("\n") - [__FILE__]).first

if !`command -v pygmentize`.empty? &&
  $stdout.tty? &&
  ARGV.none? { |arg| arg.start_with? "-" }
  exec "pygmentize", "-g", *ARGV
else
  exec orig_cat, *ARGV
end

