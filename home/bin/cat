#!/usr/bin/env python

import sys

def use_pygements():
    if not sys.stdout.isatty():
        return False
    if len(sys.argv) == 1:
        return False
    for arg in sys.argv:
        if arg.startswith("-"):
            return False
    try:
        import pygments
        return True
    except ImportError:
        return False

if use_pygements():
    import pygments.cmdline
    for arg in sys.argv[1:]:
        pygments.cmdline.main_inner([("-g", "")], [arg], "")
else:
    import os
    os.execv("/bin/cat", sys.argv)
